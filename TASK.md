# ChataLyst AI 專案任務清單

## 當前狀態
- [x] 建立專案規劃文件 (PLANNING.md) - 2023-11-10
- [x] 重新審閱與更新專案架構設計，使用 Pydantic AI 和 Pydantic Graph - 日期更新
- [x] 調整專案設計，不使用 ORM 模型，專注於連接現有資料庫

## 環境建置與基礎架構

### 階段 1: 初始化專案與環境設定 (預計: 2天)
- [x] 設置專案結構
- [x] 初始化 Git 倉庫
- [x] 創建 requirements.txt 文件並添加依賴 (Python 3.12)
- [x] 設置 .env 文件結構和模板
- [x] 建立 .env.example 文件作為參考
- [x] 建立基本的 README.md
- [x] 建立配置系統 (環境變數，配置文件等)

### 階段 2: 資料庫連接模組 (預計: 2天)
- [x] 實作 SQLite 資料庫連接管理器
- [x] 實作資料庫結構探索工具
- [x] 設計資料庫連接抽象層，以便未來遷移到 PostgreSQL
- [x] 實作查詢執行引擎
- [x] 實作查詢結果格式化功能

## Pydantic 模型定義

### 階段 3: 定義核心 Pydantic 模型 (預計: 2天)
- [ ] 定義 DBContext 資料庫上下文資料類別
- [ ] 定義 SQL 輸出相關 Pydantic 模型 (SQLOutput)
- [ ] 定義對話相關 Pydantic 模型
- [ ] 定義 ChataLystState 工作流程狀態
- [ ] 為所有模型編寫單元測試

## Agent 與工作流程開發

### 階段 4: Pydantic AI Agent 實作 (預計: 5天)
- [ ] 設計 Agent 依賴注入結構
- [ ] 實作對話處理 Agent，處理使用者輸入
- [ ] 實作 SQL 生成 Agent，處理 SQL 轉換
- [ ] 定義 Agent 工具函數，用於輔助 SQL 生成和驗證
- [ ] 為所有 Agent 編寫單元測試，使用 TestModel

### 階段 5: Pydantic Graph 工作流程實作 (預計: 4天)
- [ ] 設計工作流程圖結構，定義所需節點
- [ ] 實作 ParseQuery 節點，處理使用者查詢解析
- [ ] 實作 GenerateSQL 節點，使用 SQL 生成 Agent 產生查詢
- [ ] 實作 ExecuteSQL 節點，執行 SQL 並處理結果
- [ ] 實作 FormatResults 節點，格式化查詢結果
- [ ] 建立整體工作流程連接與測試
- [ ] 生成工作流程可視化圖

### 階段 6: 工具函數開發 (預計: 3天)
- [x] 實作資料庫 schema 探索工具
- [ ] 實作 SQL 驗證工具
- [ ] 實作 SQL 格式化工具
- [x] 實作查詢結果格式化工具
- [ ] 為所有工具函數編寫單元測試

## 使用者介面開發

### 階段 7: Streamlit 使用者介面開發 (預計: 4天)
- [ ] 設計 UI 界面
- [ ] 實作對話框組件
- [ ] 實作 SQL 查詢顯示與編輯元件
- [ ] 實作查詢結果可視化
- [ ] 實作工作流程狀態顯示
- [ ] 整合與核心 Agent 系統的連接

## 整合與測試

### 階段 8: 整合測試與 QA (預計: 3天)
- [ ] 編寫端到端測試
- [ ] 執行整合測試驗證完整流程
- [ ] 進行使用者體驗測試
- [ ] 效能測試與優化
- [ ] 解決發現的 bug 與問題

### 階段 9: 文檔與部署準備 (預計: 2天)
- [ ] 完成用戶指南
- [ ] 撰寫開發人員文檔
- [ ] 準備部署文檔
- [ ] 設計示範腳本與範例

## 額外功能 (視時間和需求)

### 階段 10: 進階功能 (預計: 5-10天)
- [ ] PostgreSQL 整合
- [x] 實作查詢歷史功能
- [ ] 實作更強大的資料庫 schema 探索功能
- [ ] 實作資料可視化增強功能
- [ ] 支援複雜 SQL 操作 (聚合函數、子查詢等)
- [ ] 實作 Agent 行為分析與監控面板

## 問題與發現
*在開發過程中發現的問題和新的任務將記錄在此* 